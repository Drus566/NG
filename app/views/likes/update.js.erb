<% if @like.errors.empty? %>

    var post = document.getElementById('post-<%= @like.likeable.id %>');
    var post_likes_wrapper = post.querySelector(".post-likes-wrapper");

    var like = post_likes_wrapper.firstElementChild.firstElementChild;
    var count_like = post_likes_wrapper.firstElementChild.nextElementSibling;
    var unlike = post_likes_wrapper.lastElementChild.firstElementChild;

    <% if @like.vote == true %>
     
        like_path = '<%= polymorphic_path([@like.likeable, @like]) %>';
        like.setAttribute('href', `${like_path}`);
        like.setAttribute('data-method', 'delete');
        like.parentElement.className = 'post-likes-voted-true';

        count_like_text = '<%= @like.likeable.count_likes %>';
        count_like.innerText = count_like_text;

        unlike_path = '<%= polymorphic_path([@like.likeable, @like], like: { :vote => false }) %>';
        unlike.setAttribute('href', `${unlike_path}`);
        unlike.setAttribute('data-method', 'patch');
        unlike.parentElement.removeAttribute('class');

    <% else %>
    
        unlike_path = '<%= polymorphic_path([@like.likeable, @like])%>';
        unlike.setAttribute('href', `${unlike_path}`);
        unlike.setAttribute('data-method', 'delete');
        unlike.parentElement.className = 'post-likes-voted-false';

        count_like_text = '<%= @like.likeable.count_likes %>';
        count_like.innerText = count_like_text;

        like_path = '<%= polymorphic_path([@like.likeable, @like], like: { :vote => true }) %>';
        like.setAttribute('href', `${like_path}`);
        like.setAttribute('data-method', 'patch');
        like.parentElement.removeAttribute('class');

    <% end %>

<% end %>
