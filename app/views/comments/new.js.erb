<% if @new_comment.errors.empty? %>

    var post = document.getElementById("post-<%= @new_comment.commentable.id %>");

    var post_comment_create_link = post.querySelector('.post-comment-create-link');
    post_comment_create_link.removeAttribute("href");
    if (post.lastElementChild.className != 'post-comment-create') {
        
        post.querySelector(".post-comment-create-link").removeAttribute("href");

        var post_comment_create = document.createElement("div");
        post_comment_create.className = 'post-comment-create';
        
        var post_comment_form = "<%=j render('comments/form', comment: @new_comment ) %>";
        
        post_comment_create.innerHTML = post_comment_form;

        post.append(post_comment_create);
    }

<% else %>
    
<% end %>